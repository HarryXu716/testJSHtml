<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
<!--    <script type="text/javascript" src="BarCode.js"></script>-->
    <script type="text/javascript" src="su/BarTools.js"></script>
    <script type="text/javascript" src="su/BarCode.js"></script>
    <title>
        js调用java
    </title>
</head>

<body>
<p id="show">

</p>
<p id="init">

</p>


<p>
    <input type="button" id="enter1" value="打开声音" onclick="test1Click();"
    />
</p>
<p>
    <input type="button" id="enter11" value="关闭声音" onclick="test11Click();"
    />
</p>


<p>
    <input type="button" id="enter2" value="开启震动" onclick="test2Click();"
    />
</p>
<p>
    <input type="button" id="enter22" value="关闭震动" onclick="test22Click();"
    />
</p>
<p>
    <input type="button" id="enter3" value="打开128支持" onclick="test3Click();"
    />
</p>
<p>
    <input type="button" id="enter33" value="关闭128支持" onclick="test33Click();"
    />
</p>
<p>
    <input type="button" id="enter4" value="打开QR支持" onclick="test4Click();"
    />
</p>
<p>
    <input type="button" id="enter44" value="关闭QR支持" onclick="test44Click();"
    />
</p>
</body>
<script>
        function test1Click() {
            var data = '声音已打开'
            window.BarCode.callHandler(
                'soundOn'
                , data
                , function(responseData) {
                    console.log('native return->'+responseData);
                }
            );
        }

        function test11Click() {
            var data = '声音已关闭'
            window.BarCode.callHandler(
                'soundOff'
                , data
                , function(responseData) {
                    console.log('native return->'+responseData);
                }
            );
        }

        function test2Click() {
            var data = '震动已打开'
            window.BarCode.callHandler(
                'vibrateOn'
                , data
                , function(responseData) {
                    console.log('native return->'+responseData);
                }
            );
        }

        function test22Click() {
            var data = '震动已关闭'
            window.BarCode.callHandler(
                'vibrateOff'
                , data
                , function(responseData) {
                    console.log('native return->'+responseData);
                }
            );
        }

        function test3Click() {
            var data = '128已打开'
            window.BarCode.callHandler(
                '128On'
                , data
                , function(responseData) {
                    console.log('native return->'+responseData);
                }
            );

        }

        function test33Click() {
            var data = '128已关闭'
            window.BarCode.callHandler(
                '128Off'
                , data
                , function(responseData) {
                    console.log('native return->'+responseData);
                }
            );

        }

        function test4Click() {
            var data = 'qr已打开'
            window.BarCode.callHandler(
                'QrOn'
                , data
                , function(responseData) {
                    console.log('native return->'+responseData);
                    document.getElementById("text4").value = responseData;
                }
            );

        }
        function test44Click() {
            var data = 'qr已关闭'
            window.BarCode.callHandler(
                'QrOff'
                , data
                , function(responseData) {
                    console.log('native return->'+responseData);
                    document.getElementById("text4").value = responseData;
                }
            );

        }


        function connectBarCode(callback) {
            if (window.BarCode) {
                callback(BarCode);
            } else {
                document.addEventListener(
                    'BarCodeReady'
                    , function() {
                        callback(BarCode)
                    },
                    false
                );
            }
        }

        connectBarCode(function(barCodeHandler) {
            barCodeHandler.init(function(message, responseCallback) {
                console.log('JS got a message', message);
                var data = {
                    'Javascript Responds': 'test!'
                };

                if (responseCallback) {
                    console.log('JS responding with', data);
                    responseCallback(data);
                }
            });

            barCodeHandler.registerHandler("barcodeListener", function(data, responseCallback) {
                receiveBarCode(data)
                if (responseCallback) {
                    var responseData = "Got barcode";
                    responseCallback(responseData);
                }
            });
        })

</script>
<!--                document.getElementById("show").innerHTML = ("data from Java: = " + data);-->

</html>

